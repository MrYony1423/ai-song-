<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Text to Speech</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 600px;
      margin: 40px auto;
      padding: 20px;
      text-align: center;
      background-color: #f8f8f8;
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
    }
    textarea {
      width: 100%;
      height: 140px;
      font-size: 18px;
      padding: 10px;
      margin-bottom: 20px;
      resize: vertical;
    }
    button, select {
      font-size: 18px;
      padding: 10px 15px;
      margin: 10px;
      border-radius: 6px;
    }
    h1 {
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <h1 id="title">Write your lyrics and I'll speak!</h1>

  <select id="languageSelect">
    <option value="en">English</option>
    <option value="he">עברית</option>
  </select>

  <select id="voiceStyleSelect">
    <option value="normal">🗣️ Regular</option>
    <option value="funny">🤪 Funny</option>
    <option value="deep">🎤 Deep</option>
    <option value="robot">🤖 Robot</option>
    <option value="fast">🚀 Pizza Guy</option>
  </select>

  <textarea id="textInput" placeholder="Type something..."></textarea><br>
  <button id="speakBtn">Go</button>
  <button id="stopBtn">Stop</button>

  <script>
    const speakBtn = document.getElementById('speakBtn');
    const stopBtn = document.getElementById('stopBtn');
    const textInput = document.getElementById('textInput');
    const voiceStyleSelect = document.getElementById('voiceStyleSelect');
    const languageSelect = document.getElementById('languageSelect');
    const title = document.getElementById('title');

    let voices = [];

    function loadVoices() {
      voices = window.speechSynthesis.getVoices();
    }

    window.speechSynthesis.onvoiceschanged = loadVoices;
    loadVoices();

    const styleSettings = {
      normal: { pitch: 1, rate: 1 },
      funny: { pitch: 1.8, rate: 1.4 },
      deep: { pitch: 0.6, rate: 1 },
      robot: { pitch: 1, rate: 0.85 },
      fast: { pitch: 1.3, rate: 1.8 }
    };

    languageSelect.addEventListener('change', () => {
      const lang = languageSelect.value;
      if (lang === 'he') {
        document.documentElement.lang = 'he';
        title.textContent = 'כתוב טקסט ואני אדבר!';
        speakBtn.textContent = 'לך';
        stopBtn.textContent = 'עצור';
        textInput.placeholder = 'כתוב משהו כאן...';
      } else {
        document.documentElement.lang = 'en';
        title.textContent = "Write your lyrics and I'll speak!";
        speakBtn.textContent = 'Go';
        stopBtn.textContent = 'Stop';
        textInput.placeholder = 'Type something...';
      }
    });

    speakBtn.addEventListener('click', () => {
      const text = textInput.value.trim();
      if (!text) return alert('Please enter text first.');

      const utterance = new SpeechSynthesisUtterance(text);
      const lang = languageSelect.value === 'he' ? 'he-IL' : 'en-US';
      utterance.lang = lang;

      const available = voices.filter(v => v.lang.startsWith(lang));
      if (available.length > 0) {
        utterance.voice = available[0];
      }

      const style = styleSettings[voiceStyleSelect.value];
      utterance.pitch = style.pitch;
      utterance.rate = style.rate;
      utterance.volume = 1;

      window.speechSynthesis.speak(utterance);
    });

    stopBtn.addEventListener('click', () => {
      window.speechSynthesis.cancel();
    });
  </script>
</body>
</html>
